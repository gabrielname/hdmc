{% extends 'layout.html'%}

{%block content%}

<div>
    <div class="container">
        <div class="row">
            <div class="col-sm-6" id="m2" style="width: 100%;height: 200px;">
            </div>
            <div class="col-sm-6" id="m3" style="width: 100%;height: 500px;">
            </div>
        </div>
        
    </div>
    <div class="container">
      <!--<div style="margin-bottom: 10px;">
            <a class="btn btn-success" href="/admin/add/">
              <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
              按钮
            </a>
        </div>
      -->

        <div class="panel panel-default">
            <div class="panel-heading">
              <span aria-hidden="true"></span>
              {{home_games.0.home}}的赛程
            </div>
            <div class="panel-body">
              <div class="bs-example" data-example-id="simple-table">
                <table class="table table-hover">
                  
                  <thead>
                    <tr>
                      <th>比赛日期</th>
                      <th>主队</th>
                      <th></th>
                      <th>比分</th>
                      <th></th>
                      <th>客队</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for obj in games %}
                    <tr>
                        <th>{{obj.game_date}}</th>
                        <td>{{obj.home}}</td>
                        <td>{{obj.home_goal}}</td>
                        <td>-</td>
                        <td>{{obj.away_goal}}</td>
                        <td>{{obj.away}}</td>
                        <!--<td>
                          <a class="btn btn-primary" href="#">编辑</a>
                          <a class="btn btn-danger" href="#">删除</a>
                        </td>
                        -->
                      </tr>
                    {%endfor%}
                  </tbody>
                </table>
              </div>
            </div>
        </div>
    </div>
    
</div>

{%block js%}
    <script src="\static\js\echarts.min.js"></script>
    <script type="text/javascript">
            $(function(){
                initPie();  
                initRadar();    
            })

            function initPie(){
                var myChart = echarts.init(document.getElementById('m2'));

                var option = {
                    tooltip: {
                        trigger: 'item'
                    },
                    legend: {
                        top: '5%',
                        left: 'center'
                    },
                    series: [
                        {
                        name: '',
                        type: 'pie',
                        radius: ['40%', '70%'],
                        avoidLabelOverlap: true,
                        itemStyle: {
                            borderRadius: 10,
                            borderColor: '#fff',
                            borderWidth: 2
                        },
                        label: {
                            show: false,
                            position: 'center'
                        },
                        emphasis: {
                            label: {
                            show: true,
                            fontSize: '40',
                            fontWeight: 'bold'
                            }
                        },
                        labelLine: {
                            show: true
                        },
                        data: [
                            { value: 1, name: '胜' },
                            { value: 735, name: '平' },
                            { value: 580, name: '负' },
                        ]
                        }
                    ]
                    };
                $.ajax({
                    url:"/pdetail_data/?pid={{home_games.0.home_id}}",
                    type:"get",
                    dataType:"JSON",
                    success:function(res) {
                        if (res.status) {
                            option.series[0].data = res.data;
                            myChart.setOption(option);
                        }
                    }

                })
            }
            

            function initRadar(){
                myChart = echarts.init(document.getElementById('m3'));
                option = {
                title: {
                    text: ''
                },
                legend: {
                    data: ['Allocated Budget', 'Actual Spending']
                },
                radar: {
                    // shape: 'circle',
                    indicator: [
                    { name: 'Sales', max: 6500 },
                    { name: 'Administration', max: 16000 },
                    { name: 'Information Technology', max: 30000 },
                    { name: 'Customer Support', max: 38000 },
                    { name: 'Development', max: 52000 },
                    { name: 'Marketing', max: 25000 }
                    ]
                },
                series: [
                    {
                    name: 'Budget vs spending',
                    type: 'radar',
                    data: [
                        {
                        value: [4200, 3000, 20000, 35000, 50000, 18000],
                        name: 'Allocated Budget'
                        },  
                    ]
                    }
                ]
                };
                myChart.setOption(option);
            }
    </script>
{%endblock%}

{%endblock%}